<script async defer
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAtZrarPnzDsfagH-LFcFF2xLQ8FgdHrQ8&callback=initMap">
</script>


<p>Your Event: </p>

<p>Title: <%=  @event.title %></p>
<p>Description: <%=  @event.description %></p>
<p>Location: <%=  @event.location %></p>
<p>Date: <%=  @event.date %></p>
<p>Time: <%=  @event.time %></p>

<div class="RSVP">
Dogs RSVP:
<% @event.dogs.each do |dog| %>
  <%= link_to "#{dog.fname} #{dog.lname}", dog_path(dog) %>
<% end %>
</div>

<div id="floating-panel">
      <input id="address" type="textbox" placeholder="Philadelphia, PA">
      <input id="submit" type="button" value="Geocode">
    </div>

<div id="map">
</div>

<script >
function initMap() {
  var myLatLng = {lat: 39.958224,lng: -75.173135};

        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 14,
          center: myLatLng
        });
        var geocoder = new google.maps.Geocoder();

      	document.getElementById('submit').addEventListener('click', function() {
      		geocodeAddress(geocoder, map);
      	});
}

function geocodeAddress(geocoder, resultsMap) {
  var address = document.getElementById('address').value;
  geocoder.geocode({'address': address}, function(results, status) {
    if (status === 'OK') {
      resultsMap.setCenter(results[0].geometry.location);
      var marker = new google.maps.Marker({
        map: resultsMap,
        position: results[0].geometry.location
      });
    } else {
      alert('Geocode was not successful for the following reason: ' + status);
    }
  });
}
</script>
